---
/**
 * @fileoverview Site-wide footer organism with navigation, resources, and meta info.
 *
 * Provides comprehensive footer following Wikipedia-style minimal aesthetic with:
 * - Navigation links to main sections
 * - Resource links (privacy, terms, disclaimer)
 * - Site branding and tagline
 * - Copyright and attribution
 *
 * Design Patterns:
 * - Fat Footer (UI-Patterns.com): Site-wide navigation and resources
 * - Template Method: Slots for customization
 *
 * @module components/organisms/Footer
 * @see {@link module:layouts/Base} - Used in Base layout
 *
 * @example
 * ```astro
 * <Footer />
 * <Footer class="custom-footer" />
 * ```
 *
 * @author How To Win Capitalism Team
 * @since 1.0.0
 */
import { debug } from '../../lib/debug';

export interface Props {
  /** Optional CSS class */
  class?: string;
}

const { class: className } = Astro.props;

const currentYear = new Date().getFullYear();
debug.log('components', 'Footer rendering', { year: currentYear });

// Navigation links
const navLinks = [
  { label: 'Home', href: '/' },
  { label: 'Introduction', href: '/faq/introduction/' },
  { label: 'Decision Matrix', href: '/faq/decision-matrix/' },
  { label: 'Latest Updates', href: '/notes/latest/' },
];

// Resource links
const resourceLinks = [
  { label: 'Disclaimer', href: '/disclaimer/' },
  { label: 'Privacy', href: '/privacy/' },
  { label: 'Terms', href: '/terms/' },
];

const footerClasses = ['site-footer', className].filter(Boolean).join(' ');
---

<footer class={footerClasses}>
  <div class="footer-content">
    <div class="footer-grid">
      <!-- Navigation -->
      <nav class="footer-section" aria-label="Footer navigation">
        <h4 class="footer-heading">Navigation</h4>
        <ul class="footer-list">
          {navLinks.map(link => (
            <li><a href={link.href}>{link.label}</a></li>
          ))}
        </ul>
      </nav>

      <!-- Resources -->
      <nav class="footer-section" aria-label="Resources">
        <h4 class="footer-heading">Resources</h4>
        <ul class="footer-list">
          {resourceLinks.map(link => (
            <li><a href={link.href}>{link.label}</a></li>
          ))}
        </ul>
      </nav>

      <!-- About -->
      <div class="footer-section footer-about">
        <h4 class="footer-heading">How To Win Capitalism</h4>
        <p class="footer-tagline">
          A satirical but practical wiki about financial autonomy.
          The game is rigged. Learn the rules anyway.
        </p>
      </div>
    </div>

    <!-- Bottom bar -->
    <div class="footer-bottom">
      <p class="footer-copyright">
        © {currentYear} How To Win Capitalism.
        <span class="footer-note">This is not financial advice.</span>
      </p>
      <p class="footer-meta">
        Built with <a href="https://astro.build" target="_blank" rel="noopener">Astro</a>
        · Styled after <a href="https://wikipedia.org" target="_blank" rel="noopener">Wikipedia</a>
      </p>
    </div>
  </div>
</footer>

<style>
  /* Footer - Wikipedia-inspired minimal design */
  .site-footer {
    background: var(--color-surface);
    border-top: var(--border-width) solid var(--color-border);
    margin-top: var(--space-2xl);
    padding: var(--space-xl) 0;
    font-size: var(--text-sm);
    color: var(--color-text);
  }

  .footer-content {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 var(--space-lg);
  }

  @media (min-width: 768px) {
    .footer-content {
      padding: 0 var(--space-2xl);
    }
  }

  @media (min-width: 1024px) {
    .footer-content {
      padding: 0 calc(var(--space-2xl) * 2);
    }
  }

  .footer-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-xl);
    padding-bottom: var(--space-xl);
    border-bottom: var(--border-width) solid var(--color-border-light);
  }

  @media (min-width: 640px) {
    .footer-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .footer-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .footer-section {
    min-width: 0;
  }

  .footer-heading {
    font-family: var(--font-serif);
    font-size: var(--text-base);
    font-weight: 600;
    margin: 0 0 var(--space-md) 0;
    color: var(--color-text);
  }

  .footer-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .footer-list li {
    margin-bottom: var(--space-sm);
  }

  .footer-list a {
    color: var(--color-link);
    text-decoration: none;
  }

  .footer-list a:hover {
    text-decoration: underline;
  }

  .footer-list a:visited {
    color: var(--color-link-visited);
  }

  .footer-tagline {
    color: var(--color-text-muted);
    margin: 0;
    line-height: var(--line-height);
  }

  .footer-bottom {
    padding-top: var(--space-lg);
    text-align: center;
  }

  .footer-copyright {
    margin: 0 0 var(--space-sm) 0;
    color: var(--color-text);
  }

  .footer-note {
    color: var(--color-text-muted);
    font-style: italic;
  }

  .footer-meta {
    margin: 0;
    color: var(--color-text-muted);
    font-size: var(--text-xs);
  }

  .footer-meta a {
    color: var(--color-link);
    text-decoration: none;
  }

  .footer-meta a:hover {
    text-decoration: underline;
  }

  /* Mobile-first: center on small screens */
  @media (max-width: 639px) {
    .footer-section {
      text-align: center;
    }

    .footer-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: var(--space-sm) var(--space-md);
    }

    .footer-list li {
      margin-bottom: 0;
    }
  }

  /* Print: hide footer */
  @media print {
    .site-footer {
      display: none;
    }
  }
</style>
