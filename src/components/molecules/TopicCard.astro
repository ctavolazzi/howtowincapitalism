---
/**
 * @fileoverview TopicCard molecule for content discovery navigation.
 *
 * Displays a clickable card linking to a topic/article.
 * Used on index pages for scannable content discovery.
 *
 * Design Patterns:
 * - Cards (UI-Patterns.com): Content preview in scannable format
 * - Composite: Composed of WikiBox atom styling
 *
 * @module components/molecules/TopicCard
 *
 * @example
 * ```astro
 * <TopicCard
 *   title="Introduction"
 *   description="Start here to understand the framework"
 *   href="/protocol/introduction/"
 * />
 *
 * <TopicCard
 *   title="Decision Matrix"
 *   description="Quantitative decision-making tool"
 *   href="/protocol/decision-matrix/"
 *   tag="Tool"
 *   icon="ðŸŽ¯"
 * />
 * ```
 *
 * @author How To Win Capitalism Team
 * @since 1.0.0
 */
import { debug } from '../../lib/debug';

export interface Props {
  /** Card title (required) */
  title: string;
  /** Short description */
  description?: string;
  /** Link destination (required) */
  href: string;
  /** Optional tag/label (e.g., "New", "Tool", "Guide") */
  tag?: string;
  /** Optional icon (emoji or text) */
  icon?: string;
  /** Optional CSS class */
  class?: string;
}

const {
  title,
  description,
  href,
  tag,
  icon,
  class: className
} = Astro.props;

debug.log('components', 'TopicCard rendering', {
  title,
  href,
  tag: tag ?? '(no tag)',
  hasDescription: !!description,
  hasIcon: !!icon,
});

const cardClasses = ['topic-card', className].filter(Boolean).join(' ');
---

<a href={href} class={cardClasses}>
  <article class="topic-card__inner">
    <header class="topic-card__header">
      {tag && <span class="topic-card__tag">{tag}</span>}
      {icon && <span class="topic-card__icon">{icon}</span>}
      <h3 class="topic-card__title">{title}</h3>
    </header>

    {description && (
      <p class="topic-card__description">{description}</p>
    )}
  </article>
</a>

<!-- Styles in Base.astro -->
